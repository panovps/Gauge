!function(a,b){"function"==typeof define&&define.amd?define(b):a.Gauge=b()}(this,function(){"use strict";var a=function(a,b){this.config={values:[],initValue:"",initAngle:5/6*Math.PI,deltaAngle:4/3*Math.PI,handRadius:10,handDelta:5,handColor:"blue",rimBorderWidth:3,rimColor:"grey",titleReverse:!1,font:"15px arial",firstApertureRange:Math.PI/4,firstApertureColor:"orange",secondApertureRange:Math.PI/4,secondApertureColor:"red"},this.config=Object.assign(this.config,b),b=this.config,~b.values.indexOf(b.initValue)||(b.initValue=b.values[0]);try{var c=document.querySelector(a);this.ctx=c.getContext("2d"),this.radius=Math.round(Math.min(c.offsetWidth,c.offsetHeight)/2)}catch(d){throw new Error("Couldn't create canvas")}return this.ctx.translate(Math.round(c.offsetWidth/2),Math.round(c.offsetHeight/2)),this.ctx.rotate(this.config.initAngle),this.setValue(this.config.initValue),this};return a.prototype=Object.assign(a.prototype,{_clear:function(){return this.ctx.clearRect(-this.radius,-this.radius,2*this.radius,2*this.radius),this},_drawRim:function(){var a=this.ctx;a.beginPath();var b=this.config.deltaAngle-this.config.firstApertureRange-this.config.secondApertureRange;a.arc(0,0,.8*this.radius,0,b,!1),a.lineWidth=this.config.rimBorderWidth,a.strokeStyle=this.config.rimColor,a.stroke(),a.closePath(),a.beginPath(),a.strokeStyle=this.config.firstApertureColor;var c=b+this.config.firstApertureRange;return a.arc(0,0,.8*this.radius,b,c,!1),a.stroke(),a.closePath(),a.beginPath(),a.strokeStyle=this.config.secondApertureColor,a.arc(0,0,.8*this.radius,c,this.config.deltaAngle,!1),a.stroke(),a.closePath(),this},_drawHand:function(a){var b=this.ctx;return b.beginPath(),b.arc(0,0,this.config.handRadius,0,2*Math.PI,!1),b.strokeStyle=this.config.handColor,b.fillStyle=this.config.handColor,b.stroke(),b.closePath(),b.fill(),b.beginPath(),b.rotate(a),b.moveTo(0,-this.config.handDelta),b.lineTo(.92*this.radius,0),b.lineTo(0,this.config.handDelta),b.closePath(),b.fill(),b.rotate(-a),this},_drawTitle:function(a,b){var c=this.ctx;c.beginPath(),c.rotate(a);var d=this.config.titleReverse?[.71,.75]:[.85,.89];c.moveTo(this.radius*d[0],0),c.lineTo(this.radius*d[1],0),c.lineWidth=2,c.fillStyle=this.config.rimColor,c.strokeStyle=this.config.rimColor,c.closePath(),c.stroke(),c.font=this.config.font,c.textBaseline="middle",c.textAlign="center";var e=this.radius*(this.config.titleReverse?.65:.95);return c.translate(e,0),c.rotate(-this.config.initAngle-a),c.fillText(b.toString(),0,0),c.rotate(this.config.initAngle+a),c.translate(-e,0),c.rotate(-a),this},_calcAngN:function(a){return a/(this.config.values.length-1)*this.config.deltaAngle},_drawGauge:function(){return this._clear()._drawRim(),this.config.values.forEach(function(a,b){this._drawTitle(this._calcAngN(b),a)}.bind(this)),this},setValue:function(a){var b=this.config.values.indexOf(a);this._drawGauge()._drawHand(this._calcAngN(b))}}),a});